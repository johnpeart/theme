---
layout: rss/skeleton
---
{%- assign allposts = site.documents | where_exp: "item", "
	item.collection == 'blogpost' or
	item.collection == 'note' or
	item.collection == 'photo' or
	item.collection == 'list' or
	item.collection == 'game' or
	item.collection == 'music' or
	item.collection == 'share' or
	item.collection == 'reply'
" | sort: date | reverse -%}

{% for page in allposts %}

	{%- if page.collection == "blogpost" %}
		{% assign title = page.title | strip_html %}
		{% assign type = "article" %}
	{%- elsif page.collection == "reply" %}
		{% assign title = page.reply_to.author.name | prepend: "↩️ In reply to " | strip_html %}
		{% assign type = "reply" %}
		{% assign image = site.url | append: site.baseurl | append: site.image-path | append: site.reply-image %}
	{%- elsif page.collection == "note" %}
		{% assign title = page.title | prepend: "🗒️ " | strip_html %}
		{% assign type = "note" %}
	{%- elsif page.collection == "share" %}
		{% assign title = page.reply_to.page.title | prepend: "🔁 Commented on “" | append: "”" | strip_html %}
		{% assign type = "share" %}
	{%- elsif page.collection == "music" %}
		{% assign title = page.title | prepend: "🎧 Shared “" | append: "” by " | append: page.artist | strip_html %}
		{% assign type = "music" %}
	{%- elsif page.collection == "photo" %}
		{% assign title = page.title | prepend: "📷 " | strip_html %}
		{% assign type = "photo" %}
	{%- elsif page.collection == "game" %}
		{% assign title = page.title | prepend: "🎮 Shared ”" | append: "“" | strip_html %}
		{% assign type = "game" %}
	{%- elsif page.title -%}
		{% assign title = page.title | strip_html | strip_newlines %}
		{% assign type = "article" %}
	{%- else -%}
		{% assign title = site.title | strip_html | strip_newlines %}
		{% assign type = "website" %}
	{%- endif -%}

<item>
	<title>{{ title | xml_escape }}</title>
	<pubDate>{{ page.date | date_to_rfc822 }}</pubDate>
	<link>{{ page.url | prepend: site.baseurl | prepend: site.url }}</link>
	<guid isPermaLink="true">{{ page.url | prepend: site.baseurl | prepend: site.url }}</guid>
	{%- for tag in page.tags %}
	<category>{{ tag | xml_escape }}</category>
	{% endfor -%}
	{%- for cat in page.categories %}
	<category>{{ cat | xml_escape }}</category>
	{% endfor -%}
	<description>
		{% if page.image and page.image contains "://" %}
			{% assign image = page.image %}
		{% elsif page.image %}
			{% assign image = site.url | append: site.baseurl | append: site.image-path | append: page.image %}
		{% elsif page.collection %}
			{% assign image = site.url | append: site.baseurl | append: site.image-path | append: '/site/social-media-' | append: page.collection | append: ".png" %}
		{% else %}
			{% assign image = site.url | append: site.baseurl | append: site.social-media-image %}
		{% endif %}

		&lt;img src=&quot;{{ image }}&quot; alt=&quot;{{ page.image-alt }}&quot; /&gt;

		{{ page.content | markdownify | xml_escape -}}
	</description>
</item>
{% endfor %}
